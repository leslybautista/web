<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>Democracy Storymap</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://unpkg.com/maplibre-gl@2.4.0/dist/maplibre-gl.css" rel="stylesheet" />
  <script src="https://unpkg.com/maplibre-gl@2.4.0/dist/maplibre-gl.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@turf/turf@6.5.0/turf.min.js"></script>
  <link rel="stylesheet" href="style.css">

  <style>
    html,
    body {
      margin: 0;
      padding: 0;
      font-family: "Helvetica Neue", sans-serif;
      height: 100%;
      color: #e7e7e7;

      overflow: hidden;
    }

    #map {
      position: fixed;
      top: 55px;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 1;
    }

    .story-container {
      margin-top: 20px;
      position: relative;
      z-index: 2;
      height: 100%;
      width: 45%;
      max-width: 700px;
      background: rgba(0, 0, 0, 0.9);
      overflow: hidden;
      display: flex;
      flex-direction: column;
      justify-content: center;
      padding: 2rem;
      box-shadow: 4px 0 12px rgba(0, 0, 0, 0.1);
    }

    .slide {
      display: none;
      flex-direction: column;
    }

    .slide.active {
      display: flex;
    }

    .slide h1 {
      margin-top: 0;
      font-size: 60px;
      color: #f1f1f1;
    }

    .slide h2 {
      margin-top: 0;
      font-size: 2rem;
      color: #f1f1f1;
    }

    .slide p {
      color: #f1f1f1;
      line-height: 1.6;
    }
    .slide a {
      color: #5e3ea1;
      text-decoration: underline;
    }


    .legend {
      position: absolute;
      bottom: 20px;
      right: 20px;
      background: white;
      padding: 10px;
      font-size: 14px;
      border-radius: 5px;
      box-shadow: 0 1px 4px rgba(0, 0, 0, 0.2);
      z-index: 3;
    }

    .legend-item {
      display: flex;
      align-items: center;
      margin-bottom: 4px;
      color: black;
      z-index: 5;
    }

    .color-box {
      width: 15px;
      height: 15px;
      margin-right: 8px;
      display: inline-block;
    }

    .liberal {
      background-color: #756e91;
    }

    .electoral-democracy {
      background-color: #b0b1cb;
    }

    .ed-lower-bound {
      background-color: #DEBFD0;
    }

    .ea-upper-bound {
      background-color: #D7BDA0;
    }

    .electoral-autocracy {
      background-color: #E1907D;
    }

    .closed-autocracy {
      background-color: #ac4f3b;
    }

    @media (max-width: 768px) {
      .story-container {
        width: 100%;
      }
    }
  </style>
</head>

<body>
  <nav class="navbar">
    <div class="nav-container">
      <a href="#" class="logo">Democratization vs. Autocratization</a>
      <ul class="nav-menu">
        <li><a href="index.html" class="nav-link">Home</a></li>
        <li><a href="overview.html" class="nav-link">Overview</a></li>
        <li><a href="europe.html" class="nav-link active">Europe</a></li>
        <li><a href="north.html" class="nav-link">North America</a></li>
        <li><a href="south.html" class="nav-link">South America</a></li>
        <li><a href="asia.html" class="nav-link">Asia</a></li>
        <li><a href="africa.html" class="nav-link">Africa</a></li>
        <li><a href="map.html" class="nav-link">Map</a></li>
      </ul>
      <button class="mobile-menu-toggle">☰</button>
    </div>
  </nav>

  <div id="map"></div>

  <div class="story-container" id="story">
    <div class="slide active" data-country="Global">
      <h2>Europe-wide Media Freedom Under Siege</h2>
      <p>Across Europe, 2025 finds democracies at a crossroads. On one side, long‐standing trends toward concentration of executive power and shrinking civic space have intensified in some capitals. 
        On the other, renewed court rulings, coalition politics and vibrant protest movements have reinforced checks and balances elsewhere. The continent’s democratic future will hinge on whether institutional safeguards can withstand pressures from populist incumbents and external shocks alike.
         In some states, leaders are testing constitutional limits to consolidate power; in others, courts, coalitions and mass movements are reinforcing the rule of law. The balance between these forces will determine whether Europe’s democracies contract or expand over the coming years. A Civil Liberties Union for Europe
         <a href="https://www.liberties.eu/f/oj-aem" target="_blank">  report </a> <em>(April 29, 2025)</em> paints an <i>“existential battle”</i> for press pluralism across the EU. It highlights how pro-government media conglomerates in Hungary, rising SLAPP (Strategic Lawsuit Against Public Participation) lawsuits in France, and opaque ownership structures in Italy and Germany undermine independent journalism. The study warns that full enforcement of the upcoming European Media Freedom Act will be the key test of member-state compliance.</p>
         <a href="https://www.v-dem.net/"
          class="source">(V-dem, 2024)</a></p>
    </div>
    <div class="slide" data-country="Hungary">
      <h2>Hungary – Targeting Civil Society</h2>
      <h3>
        <a href="https://www.reuters.com/world/hungarian-lawmakers-approve-bill-quit-international-criminal-court-2025-05-20/" target="_blank"> Hungarian lawmakers approve bill to quit ICC </a>
      </h3>
      <p>
       Prime Minister Viktor Orbán’s Fidesz party has pushed a “foreign influence” transparency bill that critics say is designed to stifle independent media, opposition parties and NGOs ahead of the 2026 election. Mass protests in Budapest on June 10 drew some 15,000 people decrying new powers for facial-recognition surveillance and blacklists of critical outlets. Orbán’s government also fast-tracked a parliamentary vote to initiate Hungary’s withdrawal from the International Criminal Court, calling the court “political” after it sought arrest warrants for heads of state.
      </p>

      <!-- Contenedor para imagen y texto en línea -->
      <div style="display: flex; align-items: flex-start; gap: 10px; margin-top: 15px;">
        <img src="media/hungary.png" alt="Hungary" style="width: 100%; height: auto;">
        <p style="margin: 0;">
        </p>
      </div>
      <p><em>Hungarians protesting against recently enacted government policies</em></p>
    </div>
    <div class="slide" data-country="Serbia">
      <h2>Serbia</h2>
      <h3>
        <a href="https://www.reuters.com/world/europe/warning-unrest-serbian-protesters-descend-belgrade-2025-03-14/" target="_blank">
          Crackdowns Amid Anti-Corruption Protests</a>
      </h3>
      <p>
        Since November 2024, student-led demonstrations over a deadly railway station collapse have ballooned 
        into broad anti-government rallies. Authorities have responded with raids on NGO offices, threats of arrests, 
        and blockades of independent broadcasters. Despite mounting civic pressure, President Aleksandar Vučić’s 
        administration shows little sign of rolling back its hard-line tactics.</p>
        <div style="display: flex; align-items: flex-start; gap: 10px; margin-top: 15px;">
        <img src="media/serbia.png" alt="serbia" style="width: 100%; height: auto;">
        </p>
      </div>
      <p style="margin: 0;">
          What began as student-led rallies over the February 2025 Novi Sad overpass collapse has morphed into broad 
          anti-government demonstrations. Authorities have responded with raids on NGO offices, intermittent internet 
          blackouts around protest sites, and threats to revoke broadcasting licenses of outlets covering the unrest. 
          Despite these tactics, weekly protest turnouts remain above 10,000.
         </p>
    </div>
    <div class="slide" data-country="Poland">
      <h2>Poland</h2>
      <h3>
        <a href="https://www.reuters.com/world/europe/polish-government-seeks-eu-approval-judicial-reform-2025-04-25/" target="_blank">
           Restoring Judicial Independence</a>
      </h3>
      <p>
        Since taking office in late 2023, Prime Minister Donald Tusk’s pro-EU coalition has tabled major reforms to reverse 
        (Prawo i Sprawiedliwość) PiS-era court-packing. On June 11, Tusk secured a Sejm confidence vote to proceed with EU-brokered judicial bills 
        that would restore the Supreme Court’s self-governance council and reinstate constitutional court judges dismissed 
        since 2015.
      </p>
      <div style="display: flex; align-items: flex-start; gap: 10px; margin-top: 15px;">
        <img src="media/poland.png" alt="Poland" style="width: 100%; height: auto;">
        
      </div>
      <p style="margin: 0;">
          Prime Minister Donald Tusk upon taking office in December 2023: <em>"Upon assuming office, [I’m] promising to turn Polish state media into a source of reliable information."</em>
        </p>
    </div>

    <div class="slide" data-country="Ukraine">
      <h2>Ukraine</h2>
      <h3>
        <a href="https://www.reuters.com/world/europe/ukraine-set-up-high-level-courts-part-reform-drive-2025-02-26/" target="_blank">
          War-Time Court Reforms under International Scrutiny</a>
      </h3>
      <div style="display: flex; align-items: flex-start; gap: 10px; margin-top: 15px;">
        <img src="media/ukraine.png" alt="ukraine" style="width: 50%; height: auto;">
        <p style="margin: 0;">
         In February 2025, Kyiv’s parliament enacted legislation to create two new high-level courts, one for state disputes, 
         another for war-related economic cases; staffed with foreign legal advisers. This was a formal IMF condition for the 
         next tranche of aid and aims to curb judicial corruption and speed up reconstruction-related litigation. </p>
      </div>
      <p> <br> Each of these instances highlights the tug-of-war between executive overreach and institutional or civic pushback that will shape Europe’s democratic trajectory in 2025 and beyond</p>
    </div>
    <div class="slide" data-country="Romania">
      <h2>Romania</h2>
      <h3>
        <a href="https://www.reuters.com/world/romanias-pro-eu-president-elect-known-calm-methodical-approach-2025-05-19/" target="_blank">
        Pro-European Turn After Contentious Vote</a> </h3>
      <p>In May 2025, Romanians delivered a clear rebuke to rising populism by electing independent, pro-EU mayor Nicuşor Dan 
        as president—defeating far-right challenger George Simion and signaling popular demand for cleaner governance and deeper
         EU integration. Within days, Dan secured agreement among fragmented pro-European parties on a multiparty coalition, 
         and President Dan (no relation) nominated a reform-minded prime minister tasked with cutting the EU’s largest budget 
         deficit and restoring judicial independence. This peaceful transfer, coalition-building across the centre-right and 
         centre-left, and explicit pledges to clamp down on corruption mark a notable deepening of Romania’s democratic 
         resilience.</p>
      <div style="display: flex; align-items: flex-start; gap: 10px; margin-top: 15px;">
        <img src="media/romania.png" alt="romania" style="width: 50%; height: auto;">
      
      </div>
       <p style="margin: 0;">
        <i>Outgoing President Klaus Werner Iohannis </i>
    </div>
  </div>

  <div class="legend">
    <div class="legend-item"><span class="color-box liberal"></span> Liberal democracy</div>
    <div class="legend-item"><span class="color-box electoral-democracy"></span> Electoral democracy</div>
    <div class="legend-item"><span class="color-box ed-lower-bound"></span> Electoral dem. Lower Bound</div>
    <div class="legend-item"><span class="color-box ea-upper-bound"></span> Electoral Aut. Upper Bound</div>
    <div class="legend-item"><span class="color-box electoral-autocracy"></span> Electoral autocracy</div>
    <div class="legend-item"><span class="color-box closed-autocracy"></span> Closed autocracy</div>
  </div>

  <script src="mobile_menu_toggle.js"></script>
  <script>
    const map = new maplibregl.Map({
      container: 'map',
      style: {
        version: 8,
        sources: {
          'raster-tiles': {
            type: 'raster',
            tiles: [
              'https://a.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}.png'],
            tileSize: 256,
            attribution: '© OpenStreetMap contributors, © CartoDB'
          }
        },
        layers: [
          {
            id: 'simple-tiles',
            type: 'raster',
            source: 'raster-tiles',
            minzoom: 0,
            maxzoom: 22
          }
        ]
      },
      center: [-50, -15],    // center on South America
      zoom: 1.0              // zoom level showing South America nicely
    });
    const southAmericaBBox = [-82, -50, -10, 60]; // [west, south, east, north]


    // Add zoom and rotation controls to the map.
    map.addControl(new maplibregl.NavigationControl({
      visualizePitch: true,
      visualizeRoll: true,
      showZoom: true,
      showCompass: true
    }));

    let geoData = null;
    let currentIndex = 0;
    const slides = document.querySelectorAll('.slide');

    map.on('load', () => {
      fetch('data/democracy.geojson')
        .then(res => res.json())
        .then(data => {
          geoData = data;

          map.addSource('democracy', {
            type: 'geojson',
            data: geoData
          });

          map.addLayer({
            id: 'country-fill',
            type: 'fill',
            source: 'democracy',
            paint: {
              'fill-color': [
                'match', ['get', 'Democracy_'],
                'LD', '#756e91',
                'LD-', '#756e91',
                'ED', '#b0b1cb',
                'ED+', '#b0b1cb',
                'ED-', '#DEBFD0',
                'EA+', '#D7BDA0',
                'EA', '#bd7262',
                'CA', '#ac4f3b',
                '#e6e3e3' // default color for other values
              ],
              'fill-opacity': 0.9
            }
          });

          map.addLayer({
            id: 'country-border',
            type: 'line',
            source: 'democracy',
            paint: {
              'line-color': '#e6e6e6',
              'line-width': 0.5
            }
          });

          map.addLayer({
            id: 'highlight',
            type: 'line',
            source: 'democracy',
            paint: {
              'line-color': '#e6e6e6',
              'line-width': 4
            },
            filter: ['==', 'COUNTRY', '']
          });

          updateSlide(0);
        });
    });


    function updateSlide(index) {
      if (!geoData || index < 0 || index >= slides.length) return;

      slides.forEach((slide, i) => {
        slide.classList.toggle('active', i === index);
      });

      const country = slides[index].dataset.country;
      currentIndex = index;

      // If it's the "Global" slide, show Europe bounding box & clear highlight
      if (country === "Global") {
        const europeBBox = [-25.0, 34.5, 60.0, 72.0];
        const containerWidth = document.getElementById('story').clientWidth;
        const offsetX = containerWidth / 4;
        const offsetY = 0;

        map.setFilter('highlight', ['==', 'COUNTRY', '']); // clear highlight

        map.fitBounds(europeBBox, {
          padding: 100,
          duration: 1200,
          offset: [offsetX, offsetY]
        });
        return;
      }

      // For other countries: highlight and zoom to the country polygon
      map.setFilter('highlight', ['==', 'COUNTRY', country]);

      const feature = geoData.features.find(f => f.properties.COUNTRY === country);
      if (!feature || !feature.geometry) {
        console.warn("Country not found in geoData:", country);
        return;
      }

      try {
        const bbox = turf.bbox(feature);

        const containerWidth = document.getElementById('story').clientWidth;
        const offsetX = containerWidth / 4;
        const offsetY = 0;

        map.fitBounds(bbox, {
          padding: 100,
          duration: 1200,
          offset: [offsetX, offsetY]
        });
      } catch (err) {
        console.warn('Could not fly to', country, err);
      }
    }


      document.addEventListener('keydown', (e) => {
        if (e.key === 'ArrowDown') {
          e.preventDefault();
          let next = currentIndex + 1;
          if (next >= slides.length) {
            next = 0;          
          }
          updateSlide(next);
        } else if (e.key === 'ArrowUp') {
          e.preventDefault();
          let prev = currentIndex - 1;
          if (prev < 0) {
            prev = slides.length - 1; 
          }
          updateSlide(prev);
        }
      });

  </script>
</body>

</html>